<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:chart="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
             x:Class="GamanaDashBoardApp.Views.LineChartView">
    <VerticalStackLayout>
        <Label Text="{Binding Config.CoinId}" 
               FontAttributes="Bold"
               HorizontalOptions="Center" />

        <ActivityIndicator IsRunning="{Binding IsBusy}"
                           IsVisible="{Binding IsBusy}"
                           Color="Blue"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />

        <chart:SfCartesianChart x:Name="chartView" 
                               HeightRequest="300"
                               IsVisible="{Binding IsNotBusy}">
            <chart:SfCartesianChart.XAxes>
                <chart:DateTimeAxis />
            </chart:SfCartesianChart.XAxes>

            <chart:SfCartesianChart.YAxes>
                <chart:NumericalAxis />
            </chart:SfCartesianChart.YAxes>

            <chart:SfCartesianChart.Series>
                <chart:LineSeries ItemsSource="{Binding Data}"
                                 XBindingPath="Timestamp"
                                 YBindingPath="Price"
                                 ShowMarkers="True">
                    <chart:LineSeries.DataLabelSettings>
                        <chart:CartesianDataLabelSettings LabelPlacement="Outer" />
                    </chart:LineSeries.DataLabelSettings>
                </chart:LineSeries>
            </chart:SfCartesianChart.Series>
        </chart:SfCartesianChart>

        <Button Text="Refresh" 
                Command="{Binding LoadDataCommand}"
                IsVisible="{Binding IsNotBusy}"
                HorizontalOptions="Center" />
    </VerticalStackLayout>
</ContentView>